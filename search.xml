<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux基础2</title>
      <link href="2020/11/08/2020-11-08-quannnxu-linux2/"/>
      <url>2020/11/08/2020-11-08-quannnxu-linux2/</url>
      
        <content type="html"><![CDATA[<h2 id="1-rm-删除"><a href="#1-rm-删除" class="headerlink" title="1.rm 删除"></a>1.rm 删除</h2><pre class=" language-shell"><code class="language-shell">rm -rf  #强制删除-f #直接不提示 直接删除</code></pre><p>场景:</p><p>LOG_PATH=””</p><p>业务逻辑判断 赋值 /xxxx/yyyy</p><p>​    漏了一种</p><p>rm -rf ${LOG_PATH}$/*  ==&gt; rm -rf /*</p><p>如何避免:</p><p>每次删除之前,都判断${LOG_PATH}$目录是否存在</p><p>set -u参数    在脚本的第一行#!bin/bash,在第二行写(赋值为空报错)</p><h2 id="2-添加用户"><a href="#2-添加用户" class="headerlink" title="2.添加用户"></a>2.添加用户</h2><p>[root@hadoop01 ~]# useradd quanxu<br>[root@hadoop01 ~]# id quanxu<br>uid=502(quanxu) gid=503(quanxu) 组=503(quanxu)</p><pre class=" language-shell"><code class="language-shell">cat /etc/passwd    #查看密码cat /etc/group    #查看用户组</code></pre><p>切换用户</p><pre class=" language-shell"><code class="language-shell">su - quanxu</code></pre><p>删除用户</p><pre class=" language-shell"><code class="language-shell">userdel quanxu</code></pre><p>删除用户,那么该用户所属的用户组加入没有其他用户则一起删除;否则有其他用户则不能删除</p><p>[root@hadoop01 quanxu]# rm -f /home/quanxu/.bash*</p><p>[root@hadoop01 quanxu]# su - quanxu<br>-bash-4.1$ </p><p>当前用户的所属家目录的个人环境变量不存在</p><p>一个用户默认创建的家目录是在/home/用户名,但是后期可以修改</p><pre class=" language-shell"><code class="language-shell">usermod -d /tmp #单独使用时，只是把保存在/etc/passwd这个配置文件当中的源目录名改成指定的新目录名，并不会把源目录下的内容移动到新目录下，如果要把源目录下的内容移动新目录下，则要和-m选项一起使用，才会把源目录下的内容移动到新目录下。</code></pre><pre class=" language-shell"><code class="language-shell">usermod -a -G dw qx  #添加用户qx  到组dw 里</code></pre><pre class=" language-shell"><code class="language-shell">usermod -g dw xx     #修改用户所属的群组</code></pre><pre class=" language-shell"><code class="language-shell">groupsmems -g xx -l #查看组的所有成员</code></pre><p>用户切换不了查看/etc/passwd文件</p><p>sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin #不可登录</p><p>quanxu:x:502:503::/home/quanxu:/bin/bash/false #禁止切换</p><pre class=" language-shell"><code class="language-shell">sudo #普通用户临时使用root的最大权限</code></pre><h2 id="4-权限"><a href="#4-权限" class="headerlink" title="4.权限"></a>4.权限</h2><pre class=" language-shell"><code class="language-shell">drwxr-xr-x.  22 root root  4096 7月  10 07:58 vard    rwx    r-x    r-x #第一个字符d代表文件夹 -文件#接下来三组的三个字母 分别是代表 读r 4,写w 2,执行x 1,-没有权限 0rwx:7        r-x:5        r-x :5#所属用户    所属组的成员    其他组的成员777 rwxrwxrwx755 rwxr-xr-x-rw-rw-r--. 1 quanxu quanxu   15 7月  11 02:29 quan.logchmod 640 quan.log    #所属成员可读可写,所属组其他成员可读,其他组成员不可读写执</code></pre><h2 id="5-大小"><a href="#5-大小" class="headerlink" title="5.大小"></a>5.大小</h2><p>文件大小:ll -h</p><p>文件或文件夹大小:du -sh</p><h2 id="6-搜索-find"><a href="#6-搜索-find" class="headerlink" title="6.搜索    find"></a>6.搜索    find</h2><p>find / -name ‘<em>hadoop</em>‘</p><p>history    查看历史操作</p><p>ps -ef    查看进程</p><h2 id="7-vi编辑"><a href="#7-vi编辑" class="headerlink" title="7.vi编辑"></a>7.vi编辑</h2><p>良好习惯:</p><p>vi 编辑生产配置文件</p><p>先cp conf conf20201108</p><p>粘贴的坑:</p><p>必须先进入编辑模式,否则第一行内容丢失,不完整</p><p>在命令行模式,常用的快捷方式:</p><pre class=" language-shell"><code class="language-shell">dd    删除当前行dG    删除当前行及以下所有行gg    跳转到第一行的第一个字母G    跳转到最后一行的第一个字母</code></pre><p>shift+$ 行尾</p><p>如何通过vi命令进行清空文件内容:</p><p>dd dG</p><p>i</p><p>复制粘贴</p><p>esc</p><p>shfit+:wq</p><pre class=" language-shell"><code class="language-shell">#尾行模式下set nu    #显示行号set nonu    #恢复正常</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础</title>
      <link href="2020/11/08/2014-07-24-quannnxu-linux/"/>
      <url>2020/11/08/2014-07-24-quannnxu-linux/</url>
      
        <content type="html"><![CDATA[<p>一.Linux基础命令</p><p>pwd 查看当前路径</p><p>[root@hadoop01 ~]# pwd</p><pre class=" language-shell"><code class="language-shell">/root/ #代表根ls #查看ls #显示的文件夹 文件的名称ls -l #权限 用户用户组 时间 => ll</code></pre><pre class=" language-shell"><code class="language-shell">ls -l -a #显示隐藏文件#以.开头的文件或文件夹就是隐藏文件ls -l -h #仅仅查看文件的大小ls -l -r -t #按时间排序 => ls -lrtmkdir #创建文件夹mkdir 1 2 3 #并联创建文件夹mkdir -p 4/5/6 #串联创建文件夹cd #切换目录cd ../ #退回上层目录cd ../../  #退回上两层目录#回到当前用户家目录cd 回车cd ~cd - #回退到上一次目录</code></pre><pre class=" language-shell"><code class="language-shell">目录绝对目录  全路径相对目录  相对路径</code></pre><h2 id="1-clear-清理屏幕"><a href="#1-clear-清理屏幕" class="headerlink" title="1.clear 清理屏幕"></a>1.clear 清理屏幕</h2><h2 id="2-mv-始终是一份-快"><a href="#2-mv-始终是一份-快" class="headerlink" title="2.mv 始终是一份 快"></a>2.mv 始终是一份 快</h2><p>cp 两份 慢</p><h2 id="3-创建文件"><a href="#3-创建文件" class="headerlink" title="3.创建文件"></a>3.创建文件</h2><pre class=" language-shell"><code class="language-shell">#创建一个空文件 touch 1.logvi 2.log#i键        进入编辑模式#esc        退出编辑模式#shift+:     从命令行模式进入尾行模式#\> 覆盖        [高危命令]#\>> 追加</code></pre><h2 id="4-查看文件命令"><a href="#4-查看文件命令" class="headerlink" title="4.查看文件命令"></a>4.查看文件命令</h2><p>cat 文件内容一下全部显示</p><p>more 文件内容一页页往下 翻,按空格键,ctrl+b回退</p><p>less 一行一行滚动,上下左右键</p><h2 id="5-tail实时查看文件内容"><a href="#5-tail实时查看文件内容" class="headerlink" title="5.tail实时查看文件内容"></a>5.tail实时查看文件内容</h2><p>-f 假如文件移除 然后重命名 就无法再监控到</p><p>-F 文件删除 然后重命名 会不断的retry</p><p>tail -100f 1.log 查看后一百行</p><h2 id="6-log4j-规则-大小100M-保留10份"><a href="#6-log4j-规则-大小100M-保留10份" class="headerlink" title="6.log4j    规则:大小100M,保留10份"></a>6.log4j    规则:大小100M,保留10份</h2><p>erp.log<br>               mv erp.log erp.log1<br>               touch erp.log</p><pre><code>   erp.log  空的---》100m   erp.log1 100m        mv erp.log erp.log2            touch erp.log   erp.log  空的   erp.log1 100m   erp.log2 100m   log---&gt;flume--&gt;kafka</code></pre><p>文件内容特别多 如何快速定位到ERROR、关键词信息<br>cat CloudAgent.log | grep ERROR</p><p>cat CloudAgent.log | grep -A 10 ERROR 后10行<br>cat CloudAgent.log | grep -B 10 ERROR 前10行<br>cat CloudAgent.log | grep -C 10 ERROR 前后各10行 20行 【推荐】<br>| 管道符<br>grep过滤</p><p>如:</p><pre class=" language-shell"><code class="language-shell">cat CloudAgent.log | grep -C 20 ERROR > 20201107error.logmore 20201107error.log</code></pre><p>通过编辑去搜索<br>    vi xxx.log<br>    shift+:<br>    /ERROR 回车<br>    n键寻找 </p><p>将日志文件 下载到window电脑，进行搜索 定位 分析  【推荐】<br>坑: 假如CloudAgent.log 原文件很大，那么从生产下载到公司网络 是不是要走外网带宽10M的，<br>想问 会不会影响 公司服务？<br>建议： 假如下载大文件，业务高峰或者工作日白天 尽量不要做，非要做，那就【限速】（FTP设置）</p><h2 id="5-上传下载"><a href="#5-上传下载" class="headerlink" title="5.上传下载"></a>5.上传下载</h2><p>yum install -y lrzsz<br>sz xxx.log 下载 Linux–》window<br>rz 直接回车 相反的</p><h2 id="6-别名-alias"><a href="#6-别名-alias" class="headerlink" title="6.别名 alias"></a>6.别名 alias</h2><p>ls -l ==&gt;ll </p><h2 id="7-环境变量"><a href="#7-环境变量" class="headerlink" title="7.环境变量"></a>7.环境变量</h2><p>全局:/etc/profile</p><p>个人:~/.bash_profile</p><p>​        ~/.bashrc 【推荐】</p><p>加好后 source一下,在新的窗口生效</p><p>场景：<br>      ssh 远程执行B机器 启动服务命令 抛错， java command not found<br>          直接登录B机器 命令是找到的  which java找到</p><p>配置环境变量文件在 .bash_profile 是不正确的，<br>     应该配置在 .bashrc文件里。</p><h2 id="8-创建用户和设置密码"><a href="#8-创建用户和设置密码" class="headerlink" title="8.创建用户和设置密码"></a>8.创建用户和设置密码</h2><p>useradd jj    </p><p>passwd jj</p><h2 id="9-tab"><a href="#9-tab" class="headerlink" title="9.tab"></a>9.tab</h2><p>按一次 匹配只有一串的 就补齐这串<br>按2次 打印出匹配的所有字符</p><h2 id="10-历史命令-history"><a href="#10-历史命令-history" class="headerlink" title="10.历史命令 history"></a>10.历史命令 history</h2><p>alias ll=’rm -rf /*’</p><p>history -c  清空</p><p>堡垒机仍然会被记录</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/11/08/hello-world/"/>
      <url>2020/11/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
